# –ü—Ä–æ–º–ø—Ç –¥–ª—è Claude Code ‚Äî –≠—Ç–∞–ø 1: –§—É–Ω–¥–∞–º–µ–Ω—Ç

## –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞

–¢—ã —Ä–µ–∞–ª–∏–∑—É–µ—à—å **Master CRM Bot** ‚Äî SaaS-—Å–µ—Ä–≤–∏—Å –¥–ª—è —á–∞—Å—Ç–Ω—ã—Ö –º–∞—Å—Ç–µ—Ä–æ–≤ (–∫–ª–∏–Ω–∏–Ω–≥, —Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞, —Ä–µ–º–æ–Ω—Ç –∏ –¥—Ä.).

–î–≤–∞ Telegram-–±–æ—Ç–∞ –Ω–∞ –æ–¥–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
- `master_bot.py` ‚Äî –±–æ—Ç –¥–ª—è –º–∞—Å—Ç–µ—Ä–æ–≤
- `client_bot.py` ‚Äî –±–æ—Ç –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤

–ü–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Äî –≤ —Ñ–∞–π–ª–µ `SPEC.md`. –ü—Ä–æ—á–∏—Ç–∞–π –µ–≥–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã.

---

## –ó–∞–¥–∞—á–∞ –≠—Ç–∞–ø–∞ 1

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –ø—Ä–æ–µ–∫—Ç–∞: –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É, –ë–î –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å

### 1. `config.py`
–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ `.env` —á–µ—Ä–µ–∑ `python-dotenv`.
–í—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã ‚Äî —á–µ—Ä–µ–∑ —ç—Ç–æ—Ç –º–æ–¥—É–ª—å. –ù–∏–∫–∞–∫–∏—Ö `os.getenv` –≤ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö.

```python
# –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
MASTER_BOT_TOKEN: str
CLIENT_BOT_TOKEN: str
CLIENT_BOT_USERNAME: str
DATABASE_URL: str
DEFAULT_BONUS_RATE: float = 5.0
DEFAULT_BONUS_MAX_SPEND: float = 50.0
DEFAULT_BONUS_BIRTHDAY: int = 300
LOG_LEVEL: str = "INFO"
```

### 2. `database.py`
–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –Ω–∞–¥ –ë–î. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç `DATABASE_URL` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
- `aiosqlite` –µ—Å–ª–∏ URL –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `sqlite`
- `asyncpg` –µ—Å–ª–∏ URL –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `postgresql`

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- `init_db()` ‚Äî —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –∏–∑ `migrations/001_init.sql`
- `get_master_by_tg_id(tg_id)` ‚Üí `Master | None`
- `create_master(tg_id, name, sphere, socials, contacts, work_hours)` ‚Üí `Master`
- `get_client_by_tg_id(tg_id)` ‚Üí `Client | None`
- `get_client_by_phone(phone)` ‚Üí `Client | None`
- `create_client(tg_id, name, phone, birthday, registered_via)` ‚Üí `Client`
- `get_master_by_invite_token(token)` ‚Üí `Master | None`
- `link_client_to_master(master_id, client_id)` ‚Äî —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ `master_clients`
- `update_master_profile(master_id, **fields)` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—è –º–∞—Å—Ç–µ—Ä–∞

### 3. `models.py`
Dataclass-–º–æ–¥–µ–ª–∏ –¥–ª—è –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π –ë–î:
`Master`, `Client`, `MasterClient`, `Service`, `Order`, `OrderItem`, `BonusLogEntry`, `Campaign`, `InboundRequest`

### 4. `states.py`
FSM-—Å–æ—Å—Ç–æ—è–Ω–∏—è aiogram –¥–ª—è –æ–±–æ–∏—Ö –±–æ—Ç–æ–≤.

–î–ª—è `master_bot`:
```python
class MasterRegisterFSM(StatesGroup):
    name = State()
    sphere = State()
    contacts = State()
    socials = State()
    work_hours = State()
```

–î–ª—è `client_bot`:
```python
class ClientRegisterFSM(StatesGroup):
    name = State()
    phone = State()
    birthday = State()
```

### 5. `keyboards.py`
–§—É–Ω–∫—Ü–∏–∏-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä –¥–ª—è master_bot.

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:
- `home_kb()` ‚Äî –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –º–∞—Å—Ç–µ—Ä–∞ (5 –∫–Ω–æ–ø–æ–∫: –ó–∞–∫–∞–∑—ã, –ö–ª–∏–µ–Ω—Ç—ã, –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥, –û—Ç—á—ë—Ç—ã, –ù–∞—Å—Ç—Ä–æ–π–∫–∏)
- `cancel_kb()` ‚Äî –∫–Ω–æ–ø–∫–∞ ¬´‚ùå –û—Ç–º–µ–Ω–∞¬ª
- `skip_kb()` ‚Äî –∫–Ω–æ–ø–∫–∏ ¬´–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å¬ª –∏ ¬´‚ùå –û—Ç–º–µ–Ω–∞¬ª
- `confirm_kb()` ‚Äî –∫–Ω–æ–ø–∫–∏ ¬´‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å¬ª –∏ ¬´‚ùå –û—Ç–º–µ–Ω–∞¬ª

### 6. `utils.py`
–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- `generate_invite_token()` ‚Äî `secrets.token_urlsafe(16)`
- `normalize_phone(phone)` ‚Üí –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –∏–ª–∏ `None` –µ—Å–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π
- `format_phone(phone)` ‚Üí –∫—Ä–∞—Å–∏–≤—ã–π —Ñ–æ—Ä–º–∞—Ç `+7 (999) 123-45-67`
- `parse_date(text)` ‚Üí `date | None` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç —Ñ–æ—Ä–º–∞—Ç–æ–≤ `15.03.1990`, `15/03/1990`, `15 03 1990`
- `format_date(date)` ‚Üí `"15 –º–∞—Ä—Ç–∞ 1990"`
- `get_invite_link(invite_token)` ‚Üí –ø–æ–ª–Ω–∞—è —Å—Å—ã–ª–∫–∞ `t.me/{CLIENT_BOT_USERNAME}?start={token}`

### 7. `master_bot.py` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ Home —ç–∫—Ä–∞–Ω

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Å—Ç–µ—Ä–∞ (FSM `MasterRegisterFSM`):**
- `/start` ‚Üí –µ—Å–ª–∏ –º–∞—Å—Ç–µ—Ä —É–∂–µ –µ—Å—Ç—å –≤ –ë–î: –ø–æ–∫–∞–∑–∞—Ç—å Home, –µ—Å–ª–∏ –Ω–µ—Ç: –Ω–∞—á–∞—Ç—å –∞–Ω–∫–µ—Ç—É
- –®–∞–≥–∏ –∞–Ω–∫–µ—Ç—ã:
  1. ¬´–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç? –í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏–ª–∏ –ø—Å–µ–≤–¥–æ–Ω–∏–º¬ª
  2. ¬´–£–∫–∞–∂–∏—Ç–µ –≤–∞—à—É —Å—Ñ–µ—Ä—É –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏¬ª (–∫–ª–∏–Ω–∏–Ω–≥, —Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞ –∏ —Ç.–¥.)
  3. ¬´–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤¬ª (—Ç–µ–ª–µ—Ñ–æ–Ω, –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã ‚Äî —Ç–µ–∫—Å—Ç)
  4. ¬´–í–∞—à–∏ —Å–æ—Ü—Å–µ—Ç–∏ –∏ –∫–∞–Ω–∞–ª—ã¬ª (—Å—Å—ã–ª–∫–∏ ‚Äî —Ç–µ–∫—Å—Ç) + –∫–Ω–æ–ø–∫–∞ ¬´–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å¬ª
  5. ¬´–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã¬ª (–ø–Ω-–ø—Ç 9:00-19:00 ‚Äî —Ç–µ–∫—Å—Ç) + –∫–Ω–æ–ø–∫–∞ ¬´–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å¬ª
- –ü–æ—Å–ª–µ –∞–Ω–∫–µ—Ç—ã: —Å–æ–∑–¥–∞—Ç—å –º–∞—Å—Ç–µ—Ä–∞ –≤ –ë–î, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å invite_token, –ø–æ–∫–∞–∑–∞—Ç—å Home
- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω–≤–∞–π—Ç-—Å—Å—ã–ª–∫–æ–π

**Home —ç–∫—Ä–∞–Ω:**
- –ö–æ–º–∞–Ω–¥–∞ `/home` –∏ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ ¬´üè† –ì–ª–∞–≤–Ω–∞—è¬ª –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å—é–¥–∞
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–∫–∞–∑—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è (–ø–æ–∫–∞ –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ ‚Äî ¬´–ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è¬ª)
- Inline-–∫–Ω–æ–ø–∫–∏: `home_kb()`
- –°–æ–æ–±—â–µ–Ω–∏–µ **—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è**, –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤–æ–µ (–∏—Å–ø–æ–ª—å–∑—É–π `message.edit_text` –∏–ª–∏ `callback.message.edit_text`)

**–ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫:**
–ö–∞–∂–¥–∞—è –∫–Ω–æ–ø–∫–∞ (–ó–∞–∫–∞–∑—ã, –ö–ª–∏–µ–Ω—Ç—ã, –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥, –û—Ç—á—ë—Ç—ã, –ù–∞—Å—Ç—Ä–æ–π–∫–∏) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ ¬´–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ¬ª + –∫–Ω–æ–ø–∫—É ¬´üè† –ì–ª–∞–≤–Ω–∞—è¬ª.

### 8. `client_bot.py` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ Home —ç–∫—Ä–∞–Ω

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ (FSM `ClientRegisterFSM`):**
- `/start {invite_token}` ‚Üí –Ω–∞–π—Ç–∏ –º–∞—Å—Ç–µ—Ä–∞ –ø–æ —Ç–æ–∫–µ–Ω—É
  - –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω: ¬´–°—Å—ã–ª–∫–∞ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞. –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –º–∞—Å—Ç–µ—Ä–∞ –ø—Ä–∏—Å–ª–∞—Ç—å –Ω–æ–≤—É—é.¬ª
  - –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω —É —ç—Ç–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞: –ø–æ–∫–∞–∑–∞—Ç—å Home
  - –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —É–∂–µ –µ—Å—Ç—å –≤ –ë–î (–¥—Ä—É–≥–æ–π –º–∞—Å—Ç–µ—Ä): –æ—à–∏–±–∫–∞ ‚Äî –≤ MVP –æ–¥–∏–Ω –∫–ª–∏–µ–Ω—Ç —É –æ–¥–Ω–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞
- `/start` –±–µ–∑ —Ç–æ–∫–µ–Ω–∞: ¬´–î–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –æ—Ç –≤–∞—à–µ–≥–æ –º–∞—Å—Ç–µ—Ä–∞.¬ª
- –®–∞–≥–∏ –∞–Ω–∫–µ—Ç—ã:
  1. ¬´–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?¬ª
  2. ¬´–í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞¬ª + –∫–Ω–æ–ø–∫–∞ ¬´üì± –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–º¬ª
  3. ¬´–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: 15.03.1990)¬ª + –∫–Ω–æ–ø–∫–∞ ¬´–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å¬ª
- –ü–æ—Å–ª–µ –∞–Ω–∫–µ—Ç—ã: —Å–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞, –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ –º–∞—Å—Ç–µ—Ä—É, –ø–æ–∫–∞–∑–∞—Ç—å Home

**Home —ç–∫—Ä–∞–Ω –∫–ª–∏–µ–Ω—Ç–∞:**
```
üëã –ü—Ä–∏–≤–µ—Ç, [–ò–º—è]!

–í–∞—à –º–∞—Å—Ç–µ—Ä: [–ò–º—è –º–∞—Å—Ç–µ—Ä–∞]
üí∞ –ë–æ–Ω—É—Å–æ–≤: 0 ‚ÇΩ
```
Inline-–∫–Ω–æ–ø–∫–∏ (2√ó3 + 1):
```
[üí∞ –ú–æ–∏ –±–æ–Ω—É—Å—ã]  [üìã –ò—Å—Ç–æ—Ä–∏—è]
[üéÅ –ê–∫—Ü–∏–∏]       [üìû –ó–∞–∫–∞–∑–∞—Ç—å]
[‚ùì –í–æ–ø—Ä–æ—Å]      [üì∏ –§–æ—Ç–æ/–≤–∏–¥–µ–æ]
     [üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è]
```

**–ó–∞–≥–ª—É—à–∫–∏** –¥–ª—è –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ + –∫–Ω–æ–ø–∫–∞ ¬´üè† –ì–ª–∞–≤–Ω–∞—è¬ª.

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–æ–¥—É

1. **Async –≤–µ–∑–¥–µ** ‚Äî –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –ë–î –∏ –±–æ—Ç–æ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ
2. **–û–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä pool** ‚Äî –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å–æ–∑–¥–∞—ë—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
3. **–°–æ–æ–±—â–µ–Ω–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç—Å—è** ‚Äî –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ –º–µ–Ω—é, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `edit_text`/`edit_reply_markup`
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî `logging.getLogger(__name__)` –≤ –∫–∞–∂–¥–æ–º –º–æ–¥—É–ª–µ, —É—Ä–æ–≤–µ–Ω—å –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–º–µ–Ω—ã** ‚Äî –∫–æ–º–∞–Ω–¥–∞ `/cancel` –∏ –∫–Ω–æ–ø–∫–∞ ¬´‚ùå –û—Ç–º–µ–Ω–∞¬ª –æ—á–∏—â–∞—é—Ç FSM –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –Ω–∞ Home
6. **–í–∞–ª–∏–¥–∞—Ü–∏—è** ‚Äî —Ç–µ–ª–µ—Ñ–æ–Ω —á–µ—Ä–µ–∑ `normalize_phone()`, –¥–∞—Ç–∞ —á–µ—Ä–µ–∑ `parse_date()`, —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –æ–± –æ—à–∏–±–∫–∞—Ö
7. **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Ç–µ–∫—Å—Ç–∞** ‚Äî –≤—Å–µ —Ç–µ–∫—Å—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π –≤—ã–Ω–µ—Å—Ç–∏ –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã (–∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª `texts.py`)
8. **–ù–∏–∫–∞–∫–∏—Ö —Ö–∞—Ä–¥–∫–æ–¥–æ–≤** ‚Äî –Ω–∏–∫–∞–∫–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤, ID –∏ URL –ø—Ä—è–º–æ –≤ –∫–æ–¥–µ

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø–æ—Å–ª–µ —ç—Ç–∞–ø–∞ 1

```
master-crm-bot/
‚îú‚îÄ‚îÄ master_bot.py      ‚úÖ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è + home
‚îú‚îÄ‚îÄ client_bot.py      ‚úÖ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è + home
‚îú‚îÄ‚îÄ database.py        ‚úÖ –≤—Å–µ CRUD —Ñ—É–Ω–∫—Ü–∏–∏ —ç—Ç–∞–ø–∞
‚îú‚îÄ‚îÄ models.py          ‚úÖ –≤—Å–µ dataclass-–º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ states.py          ‚úÖ FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îú‚îÄ‚îÄ keyboards.py       ‚úÖ –±–∞–∑–æ–≤—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ utils.py           ‚úÖ —É—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ config.py          ‚úÖ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îî‚îÄ‚îÄ 001_init.sql   ‚úÖ —É–∂–µ –≥–æ—Ç–æ–≤
‚îú‚îÄ‚îÄ .env.example       ‚úÖ —É–∂–µ –≥–æ—Ç–æ–≤
‚îî‚îÄ‚îÄ requirements.txt   ‚úÖ —É–∂–µ –≥–æ—Ç–æ–≤
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:

1. `python master_bot.py` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
2. `/start` –≤ master_bot ‚Üí –∞–Ω–∫–µ—Ç–∞ ‚Üí –ø–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –≤–∏–¥–µ–Ω Home —Å –∫–Ω–æ–ø–∫–∞–º–∏
3. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π `/start` ‚Üí —Å—Ä–∞–∑—É Home (–±–µ–∑ –∞–Ω–∫–µ—Ç—ã)
4. `/home` ‚Üí –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞ Home
5. –ö–∞–∂–¥–∞—è –∫–Ω–æ–ø–∫–∞ –º–µ–Ω—é ‚Üí –∑–∞–≥–ª—É—à–∫–∞ + –∫–Ω–æ–ø–∫–∞ ¬´–ì–ª–∞–≤–Ω–∞—è¬ª
6. `python client_bot.py` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
7. `/start` –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–æ —Å—Å—ã–ª–∫—É
8. `/start ABC123` —Å –≤–∞–ª–∏–¥–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º ‚Üí –∞–Ω–∫–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞ ‚Üí Home –∫–ª–∏–µ–Ω—Ç–∞
9. SQLite —Ñ–∞–π–ª `db.sqlite3` —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
